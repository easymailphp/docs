<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
</head>

<body>
    <div id="nav"></div>
    <main>
        <h1>EasymailPHP Docs</h1>
    </main>
    <script>
        (async () => {
            const response = await fetch('https://api.github.com/repos/easymailphp/docs/contents/');
            const data = await response.json();
            let htmlString = '<ul>';
            for (let file of data) {
                var r = await fetch(file.path);
                var text = await r.text();
                var el = document.createElement('html');
                el.innerHTML = text;
                if (file.path.replace(/^.*[\\\/]/, '') == window.location.href.replace(/^.*[\\\/]/, '')) {
                    htmlString += `<li class="active"><a href="${file.path}">${el.getElementsByTagName('title')[0].textContent}</a></li>`;
                } else {
                    htmlString += `<li><a href="${file.path}">${el.getElementsByTagName('title')[0].textContent}</a></li>`;
                }
            }
            htmlString += '</ul>';
            document.getElementById('nav').innerHTML = htmlString;
        })();
    </script>
</body></html>